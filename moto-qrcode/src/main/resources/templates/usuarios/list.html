<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head('Usuários')"></head>
<body>
<header th:replace="fragments/navbar :: navbar"></header>

<main class="container">
  <h1>Usuários</h1>

  <p th:if="${msg}" th:text="${msg}" class="flash"></p>

  <a th:href="@{/usuarios/novo}">+ Novo</a>

  <table>
    <thead>
    <tr><th>ID</th><th>Username</th><th>Role</th><th>Ações</th></tr>
    </thead>
    <tbody>
    <tr th:each="u : ${usuarios}">
      <td th:text="${u.id}">1</td>
      <td th:text="${u.username}">user</td>
      <td th:text="${u.role}">USER</td>
      <td>
        <a th:href="@{'/usuarios/' + ${u.id} + '/editar'}">Editar</a>
        <form th:action="@{'/usuarios/' + ${u.id} + '/excluir'}" method="post" style="display:inline">
          <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}">
          <button type="submit" onclick="return confirm('Excluir este usuário?')">Excluir</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
</main>

<footer th:replace="fragments/footer :: footer"></footer>
</body>
</html>
