
#  API REST - Cadastro de Motos via QR Code

Este projeto foi desenvolvido como parte do Challenge da disciplina de Java Advanced, utilizando **Spring Boot** e banco de dados **Oracle**.  
A API permite o cadastro de motos manualmente ou via leitura de QR Code, al√©m da gest√£o de √°reas de opera√ß√£o.

---

## Banco de Dados

###  Conex√£o
- **Banco:** Oracle
- **URL:** jdbc:oracle:thin:@oracle.fiap.com.br:1521:ORCL
- **Usu√°rio:** rm554557
- **Senha:** Fiap25

###  Estrutura das Tabelas

####  Tabela de √Åreas
```sql
CREATE TABLE T_MOTTU_AREA (
    ID_AREA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NM_AREA VARCHAR2(100) UNIQUE NOT NULL
);
```

####  Tabela de Motos
```sql
CREATE TABLE T_MOTTU_MOTO (
    ID_MOTO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DS_PLACA VARCHAR2(20) UNIQUE NOT NULL,
    NM_MODELO VARCHAR2(100) NOT NULL,
    ID_AREA NUMBER NOT NULL,
    CONSTRAINT FK_MOTO_AREA FOREIGN KEY (ID_AREA) REFERENCES T_MOTTU_AREA(ID_AREA)
);
```

###  Dados obrigat√≥rios:
```sql
INSERT INTO T_MOTTU_AREA (NM_AREA) VALUES ('Zona Sul');
INSERT INTO T_MOTTU_AREA (NM_AREA) VALUES ('Zona Norte');
COMMIT;
```

---

##  Como rodar a aplica√ß√£o corretamente

1. ‚úÖ Ter o banco Oracle ativo e conectado.
2. ‚úÖ Ter criado as tabelas `T_MOTTU_AREA` e `T_MOTTU_MOTO` conforme o script acima.
3. ‚úÖ Inserir pelo menos uma √°rea na tabela `T_MOTTU_AREA` ou usar o endpoint `/areas` para criar.
4. ‚úÖ Configurar o arquivo `application.properties`:
```properties
spring.datasource.url=jdbc:oracle:thin:@oracle.fiap.com.br:1521:ORCL
spring.datasource.username=rm554557
spring.datasource.password=fiap24
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
server.port=8080
```
5.  Rodar a aplica√ß√£o (`mvn spring-boot:run` ou via IntelliJ/VSCode).
6.  Usar Postman ou outro cliente REST para consumir os endpoints.

---

##  Como rodar a parte do QR Code

###  Passo a passo:
1. Execute a classe:
```
br.com.fiap.mottu.motoqrcode.scanner.QRCodeToggleScanner
```
2. Aponte um QR Code para a c√¢mera contendo o seguinte JSON:
```json
{
  "placa": "PROF5678",
  "modelo": "BMW GS 1200"
}
```
3. O sistema ir√° ler e cadastrar automaticamente no endpoint:
```
POST http://localhost:8080/motos/qrcode
```
 Desde que voc√™ tenha selecionado uma √°rea ativa antes:
```
POST http://localhost:8080/areas/selecionar/{id}
```

###  Gere o QR Code no site:
üîó [https://www.qr-code-generator.com/](https://www.qr-code-generator.com/)

e n√£o esque√ßa de colocar o json

{
  "placa": "PROF5678",
  "modelo": "BMW GS 1200"
}

---

##  Endpoints da API

###  √Åreas

| M√©todo | Endpoint                              | Descri√ß√£o                                                         |
|--------|----------------------------------------|--------------------------------------------------------------------|
| `GET`  | `/areas`                              | üîç Lista todas as √°reas dispon√≠veis no banco.                     |
| `POST` | `/areas`                              | ‚úÖ Cadastra uma nova √°rea.                                         |
| `POST` | `/areas/selecionar/{id}`              | ‚úÖ Define uma √°rea. **Obrigat√≥rio antes de testar qualquer Endpoint de motos.**   |
| `GET`  | `/areas/ativa`                        | üîç Retorna a √°rea atualmente ativa no sistema.                     |

---

###  Motos

| M√©todo | Endpoint                              | Descri√ß√£o                                                               |
|--------|----------------------------------------|-------------------------------------------------------------------------|
| `GET`  | `/motos`                              | üîç Lista todas as motos cadastradas.                                    |
| `POST` | `/motos`                              | ‚úÖ Cadastra uma moto manualmente. Informa placa, modelo e √°rea. **√°rea ativa previamente definida**         |
| `POST` | `/motos/qrcode`                        | ‚úÖ Cadastra uma moto via QR Code. Usa a **√°rea ativa previamente definida**. |
| `PUT`  | `/motos/{id}`                          | üîÑ Atualiza os dados de uma moto existente.                             |
| `DELETE`| `/motos/{id}`                         | ‚ùå Deleta uma moto do banco.                                            |

---

##  Exemplo de JSON para cada opera√ß√£o

###  **Cadastro manual (`POST /motos`)**
```json
{
  "placa": "XYZ1234",
  "modelo": "Honda CG",
  "idArea": 1
}
```

###  **Cadastro via QR Code (`POST /motos/qrcode`)**
```json
{
  "placa": "XYZ5678",
  "modelo": "Honda CG"
}
```

###  **Atualizar uma moto (`PUT /motos/{id}`)**
```json
{
  "placa": "XYZ9999",
  "modelo": "Honda CG Titan",
  "idArea": 1
}
```

###  **Criar uma √°rea (`POST /areas`)**
```json
{
  "nome": "Zona sul"
}
```

---

##  Fluxo correto de uso

1.  Cadastrar as √°reas no banco (`INSERT INTO T_MOTTU_AREA...`) ou via `/areas`.
2.  Selecionar a √°rea ativa:
```
POST /areas/selecionar/{id}
```
3.  Cadastrar motos usando `/motos` ou `/motos/qrcode`.
4.  Atualizar ou ‚ùå deletar motos conforme necessidade.

---

##  Desenvolvido por:
RM 556293 Alice Teixeira Caldeira  
RM 555708 Gustavo Goulart
RM 554557 Victor Medeiros
